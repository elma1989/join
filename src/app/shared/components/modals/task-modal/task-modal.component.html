<div class="modal-overlay" (click)="closeTaskModal()">

	<div class="task-modal-detail-container" [@slideInOut]="isOpen ? 'open' : 'closed'"
		(click)="$event.stopPropagation()">

			<div class="task-modal-header">
				<h2 [ngClass]="{ blue: task().category == Category.USERSTORY, green: task().category == Category.TECHNICAL, yellow: task().category == Category.TASK}">
					{{ task().category }}
				</h2>
				<div id="task-modal-close-btn">
					<button type="button" (click)="closeTaskModal()">X</button>
				</div>
			</div>
		
			<div class="title limiter">{{ task().title }}</div>
			<div class="description limiter">{{ task().description }}</div>
		
			<div class="task-modal-dueDate-container">
				<h3>Due date:</h3>
				<p>{{ task().dueDate.toDate() | date:'dd.MM.yyyy' }}</p>
			</div>
		
			<div class="task-modal-priority-container">
				<h3>Priority:</h3>
				<div class="task-modal-priority">
					<p>{{ task().priority }}</p>
					<img src="assets/Icons/taskBoard/{{ task().priority | lowercase }}Task.png" alt="priority Icon" />
				</div>
			</div>
			<div class="task-modal-assigned-container">
				<h3>AssignedTo:</h3>
				<div class="task-modal-assigned">
					<div class="task-modal-assigned-detail">
						@for (contact of task().contacts; track contact.id) {
							<div class="contact-item">
								<app-contact-icon class="contact-icon {{ contact.iconColor }}"
								[contact]="contact"></app-contact-icon>
								<span class="contact-name">
									{{ contact.getFullName() }}
								</span>
							</div>
						}
					</div>
				</div>
			</div>
			<div class="task-modal-subtasks">
				<h3>Subtasks:</h3>
				@for (subtask of task().subtasks; track subtask.id) {
					<div class="task-modal-input">
						<input type="checkbox" [checked]="subtask.finished" (change)="updateSubTaskStatus(subtask, $event)" />
						{{ subtask.name }}
					</div>
				}
			</div>
		
			<div class="task-option-container">
				<button (click)="fireDB.deleteTaskInDB('tasks', task().id); closeTaskModal()">
					<img class="delete-btn" src="assets/Icons/taskBoard/delete.png" alt="" />Delete
				</button>
				<hr>
				<button (click)="modalService.openAddTaskModal(task()); closeTaskModal()">
					<img src="assets/Icons/taskBoard/edit.png" alt="" />Edit
				</button>
			</div>
	</div>
</div>