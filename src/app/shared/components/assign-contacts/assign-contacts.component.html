<div class="assign-to-container">
    <div class="assign-to-input" (click)="toggleDropdown()">
        @if (selectedValues().length) {
        <span class="selection-presenter-txt">
            @if (selectedValues()[0]) {
            {{ selectedValues()[0].getFullName() }}
            }
            @if(selectedValues()[1]) {
            , {{ selectedValues()[1].getFullName() }}
            }
            @if(selectedValues()[2]) {
            , ...
            }
        </span>
        } @else {
        <span class="placeholder">{{ placeholder }}</span>
        }
        <span class="arrow">{{ isOpen ? '▲' : '▼' }}</span>
    </div>

    @if ( isOpen ) {
    <div class="options">
        <input type="text" placeholder="search..." class="search" [(ngModel)]="searchTerm" (ngModelChange)="searchTerm"
            (click)="$event.stopPropagation()" />
        @if (filteredOptions().length) {
        @for (option of filteredOptions(); track option.id) {
        <div class="option">
            <div class="contact-container">
                <app-contact-icon class="{{option.iconColor}}" [contact]="option"></app-contact-icon>
                <span>{{ option.getFullName() }}</span>
            </div>
            <input id="add-contact-chb-{{option.id}}" type="checkbox" [checked]="isSelected(option)"
                (click)="toggleSelection(option); $event.stopPropagation()" />
        </div>
        }
        } @else {
        <div class="no-results">Keine Treffer</div>
        }
    </div>
    }

    <div class="contact-list-item-container">
        @if(selectedValuesLocal.length) {
        <app-contact-icon-list [contacts]="selectedValuesLocal"></app-contact-icon-list>
        }
    </div>
</div>