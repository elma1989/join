@use '../../../../../public/styles/all_styles.scss' as all;

:host {
	@include all.fl();

	.task-column-container {
		@include all.size($w: 26rem, $h: 28rem);
		@include all.marpad($mar: 0 0 1rem 0, $pad: 1.5rem);
		@include all.borRad($radius: 1.6rem);
		background: rgb(254, 253, 253);
		box-shadow: 0 0 5px lightgrey;
		cursor: pointer;

		@include all.notebook {
			@include all.marpad($mar: 0 1rem 0 0, $pad: 1rem);
		}

		.task-column-item-header {
			@include all.size($h: 3.5rem);
			@include all.marpad($mar: 0 0 2rem 0);

			.mobile-options-container {
				@include all.absolute($bottom: 0, $right: 1rem);
				@include all.size($w: 5rem, $h: 5rem);
				display: none;
				z-index: 1;

				@include all.tablet {
					display: flex;
				}

				.option-btns {
					@include all.size($w: 40px, $h: 40px);
					@include all.fl($alit: center, $jc: end, $gap: 0.5rem);
					@include all.absolute($top: 0.7rem, $right: 0);
					background: transparent;
					border: none;
					cursor: pointer;
					z-index: 20;
				}

				.dot {
					@include all.size($w: 4px, $h: 4px);
					@include all.marpad($mar: 0.2rem 0);
					background-color: #2c3e50;
				}
			}

			.dropdown {
				@include all.absolute($top: 3rem, $right: 0);
				@include all.marpad($pad: 1rem);
				@include all.size($h: 17.5rem);
				@include all.fl($jc: center, $alit: start, $flexdir: column, $gap: 0.5rem);
				min-width: 14.5rem;
				background-color: #1f2a3a;
				border-radius: 1.6rem 0 1.6rem 1.6rem;
				box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
				z-index: 10;

				@include all.tablet {
					@include all.size();
				}

				a {
					@include all.marpad($pad: 1rem);
					color: #ffffff;
					text-decoration: none;
					width: 100%;

					&:hover {
						background-color: #2c3b52;
						border-radius: 0.5rem;
						@include all.size();
					}
				}
			}
		}


		h2 {
			@include all.size($w: fit-content, $h: 3rem);
			@include all.marpad($mar: 0 0 2rem 0, $pad: 0.5rem);
			@include all.fl($jc: center);
			@include all.borRad($radius: 0.8rem);
			font-size: 1.8rem;
			font-weight: lighter;
			color: white;
		}

		.blue {
			background: #0038FF;
		}

		.green {
			background: #1fd7c1;
		}

		.yellow {
			background: teal;
		}

		.main-info-container {
			width: 100%;
			height: 80%;

			.title {
				@include all.size($w: 100%, $h: auto);
				@include all.limiter();
				@include all.marpad($mar: 0 0 2rem 0);
				font-size: 1.8rem;
				font-weight: bold;
				white-space: wrap;
			}

			.description {
				@include all.size($w: 100%, $h: auto);
				@include all.marpad($mar: 0 0 1rem 0);
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: normal;
				line-clamp: 2;
				max-height: 7rem;
				font-size: 1.8rem;
				color: grey;
			}

			.subtask-progress-box {
				position: relative;
				@include all.marpad($mar: 1rem 0, $pad: 0.6rem 0.8rem);
				cursor: pointer;

				.progress-bar-wrapper {

					.progress-bar-background {
						@include all.size($h: 0.8rem);
						@include all.borRad($radius: 1rem);
						background-color: #e0e0e0;
						overflow: hidden;

						.progress-bar-fill {
							@include all.size($h: 100%);
							background-color: #3694ff;
							transition: width 0.3s ease;
						}
					}

					.subtask-counter {
						@include all.marpad($mar: 0.3rem 0 0 0);
						display: block;
						text-align: right;
						font-size: 1.2rem;
						color: #555;
					}
				}

				.subtask-tooltip {
					@include all.size($w: max-content);
					@include all.absolute($bottom: 125%, $left: 50%);
					@include all.marpad($pad: 0.6rem 1rem);
					@include all.borRad($radius: 0.7rem);
					transform: translateX(-50%);
					background-color: #333;
					color: #eae9e9;
					box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
					font-size: 1.4rem;
					white-space: nowrap;
					opacity: 0;
					pointer-events: none;
					transition: opacity 0.2s ease;
					z-index: 10;

					.subtask-list {
						@include all.fl($flexdir: column, $gap: 0.5rem);
						@include all.marpad($pad: 0, $mar: 1rem 0 0);
						list-style: none;

						.subtask-item {
							@include all.fl($alit: center, $gap: 0.4rem);
							font-size: 1.3rem;

							input {
								pointer-events: none;
								accent-color: #f4b400;
							}

							.completed {
								text-decoration: line-through;
								color: #aaa;
							}
						}
					}
				}

				&:hover .subtask-tooltip {
					opacity: 1;
				}
			}

			.progress-bar-wrapper {
				@include all.fl($alit: center, $gap: 1rem);
			}

			.progress-bar-background {
				@include all.size($h: 0.8rem);
				flex-grow: 1;
				background-color: #dedddd;
				border-radius: 4px;
				overflow: hidden;
			}

			.progress-bar-fill {
				@include all.size($w: 100%, $h: 0.8rem);
				background-color: #3b82f6;
				transition: width 0.3s ease-in-out;
			}

			.subtask-counter {
				white-space: nowrap;

				p {
					font-size: 1.6rem;
				}
			}

			.column-bottom-container {
				@include all.fl($alit: center, $jc: space-between);

				img {
					@include all.size($w: 2rem, $h: 1.2rem);
				}
			}
		}
	}
}